<!DOCTYPE html>
{% load static %}
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- ===== CSS ===== -->
        <link id="mycss" rel="stylesheet" href="{% static 'assets/css/lightMode.css' %}">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">


        <!-- ===== BOX ICONS ===== -->
        <link href='https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css' rel='stylesheet'>

        <title>Portfolio</title>
    </head>
    <body>
        <!--===== HEADER =====-->
        <header class="l-header">
            <nav class="nav bd-grid">
                
                <div>
                    <a href="#" class="nav__logo">{{ home.name }}</a>
                </div>

                <div class="nav__menu" id="nav-menu">
                    <ul class="nav__list">
                        <li class="nav__item"><a href="#home" class="nav__link active">Home</a></li>
                        <li class="nav__item"><a href="#about" class="nav__link">About</a></li>
                        <li class="nav__item"><a href="#skills" class="nav__link">Skills</a></li>
                        <li class="nav__item"><a href="#projects" class="nav__link">Projects</a></li>
                        <li class="nav__item"><a href="#contact" class="nav__link">Contact</a></li>
                        <li class="nav__item"><button class="btn btn-light" onclick="swapStyles('lightMode.css')">Light Mode</button></li>
                        <li class="nav__item"><button class="btn btn-dark" onclick="swapStyles('darkMode.css')">Dark Mode</button></li>
                
                    </ul>
                </div>

                <div class="nav__toggle" id="nav-toggle">
                    <i class='bx bx-menu'></i>
                </div>
            </nav>
        </header>

        <main class="l-main">
            <!--===== HOME =====-->
            <section class="home" id="home">
                <div class="home__container bd-grid">
                    <h1 class="home__title"><span>{{ home.greetings_1 }}</span><br>{{ home.greetings_2 }}</h1>

                    <div class="home__scroll">
                        <a href="#about" class="home__scroll-link"><i class='bx bx-up-arrow-alt' ></i>Scroll down</a>
                    </div>

                    <img src="{{ home.picture.url }}" alt="" class="home__img">
                </div>
            </section>
            
            <!--===== ABOUT =====-->
            <section class="about section" id="about">
                <h2 class="section-title">About</h2>

                <div class="about__container bd-grid">
                    <div class="about__img">
                        <img src="{{ about.profile_img.url }}" alt="">
                    </div>

                    <div>
                        <h2 class="about__subtitle">{{ about.heading }}</h2>
                        <span class="about__profession">{{ about.career }}</span>
                        <p class="about__text">{{ about.description }}</p>

                            
                        </div>
                    </div>
                </div>
            </section>

            <!--===== SKILLS =====-->
            <section class="skills section" id="skills">
                <h2 class="section-title">Skills</h2>

                <div class="skills__container bd-grid">
                    <div class="skills__box">
                        {% for category in categories %}
                        <h3 class="skills__subtitle">{{category.name}}</h3>
                            {% for skills in category.skills_set.all %}
                            
                                <span class="skills__name">{{skills.skill_name}}</span>
                            {% endfor %}
                        {% endfor %}
                        
                    </div>

                    <div class="skills__img">
                        <img src="{% static 'assets/img/skill.jpg' %}" alt="">
                    </div>
                </div>
            </section>

            <!--===== Projects =====-->
            <section class="project section" id="project">
                <h2 class="section-title">Projects</h2>

                
                <div class="project__container bd-grid">

                    {% for project in projects %}
                    
                    <div class="project__img">
                        <img src="{{ project.image.url }}" alt="">

                        <div class="project__link">
                            <a href="{{ project.link }}" class="project__link-name">View details</a>
                        </div>
                    </div>

                    {% endfor %}
                    
                </div>
                
            </section>

            <!--===== CONTACT =====-->
            <section class="contact section" id="contact">
                <h2 class="section-title">Contact</h2>

                <div class="contact__container bd-grid">
                    <div class="contact__info">
                        <h3 class="contact__subtitle">EMAIL</h3>
                        <span class="contact__text">amanda96laurindo@outlook.com</span>
                    </div>

                    <div class="contact__info">

                        <h3 class="contact__subtitle">PHONE</h3>
                        <span class="contact__text">+55 45 99124-3946</span>

                    </div> 
                </div>
            </section>
        </main>

        <!--===== FOOTER =====-->
        <footer class="footer section">
            <div class="footer__container bd-grid">
                <div class="footer__data">
                    <h2 class="footer__title">Amanda de Oliveira Laurindo</h2>
                    <p class="footer__text">I'm Amanda and this is my portfolio, which was made by following the tutorial from Academy Omen.</p>
                    <a href="https://github.com/Academy-Omen/django-portfolio/tree/main" class="footer__link">https://github.com/Academy-Omen/django-portfolio/tree/main</a>
                </div>

                <div class="footer__data">
                    <h2 class="footer__title">EXPLORE</h2>
                    <ul>
                        <li><a href="#home" class="footer__link">Home</a></li>
                        <li><a href="#about" class="footer__link">About</a></li>
                        <li><a href="#skills" class="footer__link">Skills</a></li>
                        <li><a href="#projects" class="footer__link">Projects</a></li>
                        <li><a href="#Contact" class="footer__link">Contact</a></li>
                    </ul>
                </div>
                
                <div class="footer__data">
                    <h2 class="footer__title">SOCIAL MEDIAS</h2>
                    <a href="https://www.instagram.com/amanda_l04/" class="footer__social"><i class='bx bxl-instagram' ></i></a>
                    <a href="https://github.com/AmL9617" class="footer__social"><i class='bx bxl-github' ></i></a>
                </div>


            </div>
        </footer>

        <!--===== SCROLL REVEAL =====-->
        <script src="https://unpkg.com/scrollreveal"></script>

        <!--===== MAIN JS =====-->
        <script src="{% static 'assets/js/main.js' %}"></script>

        <script type="text/javascript">

            function getCookie(name) {
                var cookieValue = null;
                if (document.cookie && document.cookie !== '') {
                    var cookies = document.cookie.split(';');
                    for (var i = 0; i < cookies.length; i++) {
                        var cookie = cookies[i].trim();
                        // Does this cookie string begin with the name we want?
                        if (cookie.substring(0, name.length + 1) === (name + '=')) {
                            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                            break;
                        }
                    }
                }
                return cookieValue;
            }
            var csrftoken = getCookie('csrftoken');
    
    
    
            var cssFile = "{% static 'assets/css' %}"
            
    
            function swapStyles(sheet){
                document.getElementById('mycss').href = cssFile + '/' + sheet
                localStorage.setItem('theme', sheet)
    
                updateTheme(sheet)
            }
    
    
            function loadSettings(){
                //Call data and set local storage
    
                var url = "{% url 'user_settings' %}"
                fetch(url, {
                    method:'GET',
                    headers:{
                        'Content-type':'application/json'
                    }
                })
                .then((response) => response.json())
                .then(function(data){
    
                    console.log('Data:', data)
    
                    var theme = data.value;
                    
                    if (theme == 'lightMode.css' || null){
                        swapStyles('lightMode.css')
                    }else if(theme == 'darkMode.css'){
                        swapStyles('darkMode.css')
                    }
                    
    
                })
    
            }
            
            loadSettings()
    
    
            function updateTheme(theme){
                var url = "{% url 'update_theme' %}"
                fetch(url, {
                    method:'POST',
                    headers:{
                        'Content-type':'application/json',
                        'X-CSRFToken':csrftoken,
                    },
                    body:JSON.stringify({'theme':theme})
                })
            }
        </script>
    </body>
</html>
